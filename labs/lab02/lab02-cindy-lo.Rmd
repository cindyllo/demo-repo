---
title: "Lab 02: Vector Basics"
author: "Cindy Lo"
date: "9/5/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## About `.RData` files
### Inspecting the data objects
```{r}
# download RData file into your working directory
rdata <- "https://github.com/ucb-stat133/stat133-fall-2018/raw/master/data/nba2018-salary-points.RData"
download.file(url = rdata, destfile = 'nba2018-salary-points.RData')

# load data in your R session
load('nba2018-salary-points.RData')
```

```{r}
ls()
```

Using `length()` to explore the content of `experience`, `player`, and `age`
```{r}
length(experience)
length(player)
length(age)
```

Using `head()` to explore the content of `experience`, `player`, and `age`
```{r}
head(experience)
head(player)
head(age)
```

Using `tail()` to explore the content of `experience`, `player`, and `age`
```{r}
tail(experience)
tail(player)
tail(age)
```

Using `summary()` to explore the content of `experience`, `player`, and `age`
```{r}
summary(experience)
summary(player)
summary(age)
```
All of the chosen objects have the same length.

There doesn't appear to be any missing values, i.e. `NA` in any of the objects.

To find out the class of each of the chosen objects:
```{r}
class(experience)
class(player)
class(age)
```

To know if the loaded objects is a vector, use `is.vector()`
```{r}
is.vector(experience)
```

To know if a given vector is of a certain data type, use `typeof()` which gives the type of storage of any object:
```{r}
typeof(experience)
```

## Manipulating Vectors: Subsetting
```{r}
four <- head(player, n=4)
four
four[1]
four[0]
four[-1]
four[-c(1, 2, 3)]
four[5]
four[c(1, 2, 2, 3, 3, 3)]
```

###Using `seq()`, `rep()` to extract:

All the even elements in `player`:
```{r}
even_elem <- seq(from = 2, to = length(player), by = 2)
player[even_elem]
```

All the odd elements in `salary`:
```{r}
odd_elem <- seq(from = 1, to = length(salary), by = 2)
salary[odd_elem]
```

All multiples of 5 (e.g. 5, 10, 15, etc) of `team`:
```{r}
by_5 <- seq(from = 5, to = length(team), by = 5)
team[by_5]
```

Elements in positions 10, 20, 30, etc of `scored`:
```{r}
by_10 <- seq(from = 10, to = length(scored), by = 10)
scored[by_10]
```

```{r}
even_elem_team <- seq(from = length(team), to = 2, by = -2)
team[even_elem_team]
```

### Logical Subsetting
Players in position of Center, of Warriors(GSW)
```{r}
player[which(position == "C")]
```
Players of either GSW (warriors) or LAL (lakers)
```{r}
player[which(team == "GSW" | team == "LAL")]
```
Players in position Shooting Guard or Point Guards, of Lakers
```{r}
player[which((position == "SG" | position == "PG") & team == "LAL")]
```
Subset of Small Forwards of GSW and LAL
```{r}
player[which((team == "GSW" | team == "LAL") & (position == "SF"))]
```
Name of the player with the largest salary
```{r}
player[which.max(salary)] #or player[salary == max(salary)]
```
Name of the palyer with the smallest salary
```{r}
player[which.min(salary)] #or player[salary == min(salary)]
```
Name of the player with the largest number of scored points
```{r}
player[which.max(scored)]
```
Salary of the player with the largest number of points
```{r}
salary[player == player[which.max(scored)]]
```
Largest salary of all the Centers
```{r}
max(salary[which(position == "C")])
```
Team of the player with the largest number of scored points
```{r}
team[which(player == player[which.max(scored)])]
```
Name of the player with the largest number of 3-pointers
```{r}
player[which.max(points3)]
```

## Subsetting with Character Vectors
### Some plotting
```{r}
#install.packages(c("ggplot2", "plotly"))
library(ggplot2)
library(plotly)

plot_ly(x = scored, y = salary, type = "scatter", mode = "markers")
```
An issue with this generated plot is that it doesn't have any labels.

```{r}
log_scored <- log(scored)
log_salary <- log(salary)
plot(log_scored, log_salary)
text(log_scored, log_salary, labels = abbreviate(player))
```

Create a scatterplot of points and salary for the Warriors (GSW), displaying the names of the players. Generate two scatter plots, one with raw values(original scale, and another plot with log-transformations).
```{r}
plot_ly(x = scored[which(team == "GSW")], y = salary[which(team == "GSW")], type = "scatter", mode = "markers")

gsw_log_scored <- log(scored[which(team == "GSW")])
gsw_log_salary <- log(salary[which(team == "GSW")])
plot(gsw_log_scored, gsw_log_salary)
text(gsw_log_scored, gsw_log_salary, labels = player[which(team == "GSW")])
```

## Recycling
Create a new vector `salary_millions` with the converted values in millions of dollars
```{r}
salary_millions <- salary / 1000000
salary_millions
```
Take the values in `points`, `points2`, and `points3` and create a new vector `scored_points` that gives you the same values as `scored`
```{r}
scored_points <- points1 + (2 * points2) + (3 * points3)
scored_points
```

##Factors
```{r}
is.factor(team)
position_fac <- factor(position)
position_fac[1:5]
table(position_fac)
```
####Practice manipulating `position_fac` to get:
Positions of Warriors
```{r}
position_fac[which(team == "GSW")]
```
Positions of players with salaries > 15 millions
```{r}
position_fac[which(salary_millions > 15)]
```
Frequencies (counts) of positions with salaries > 15 millions
```{r}
table(position_fac[which(salary_millions > 15)])
```
Relative frequencies (proportions) of Shooting Guards ('SG') in each team
```{r}
team_fac <- factor(team)
table(team_fac[position == "SG"]) / table(team_fac)
```
#### More plots
```{r}
plot(scored, salary, col = position_fac)
plot(scored, salary, col = position_fac, pch = 3)
plot(scored, salary, col = position_fac, pch = 1)
plot(scored, salary, col = position_fac, pch = 3, cex = 3)
plot(scored, salary, col = position_fac, pch = 3, cex = 10)
plot(scored, salary, col = position_fac, pch = 3, cex = 0.4)
plot(scored, salary, col = position_fac, pch = 3, cex = 0.1)
plot(scored, salary, col = position_fac, pch = 3, cex = 0.4, xlab = "scores", ylab = "salary in millions")
```
